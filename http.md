### http 详解

#### 概述

1、http 是一种超文本传输协议  
2、无状态：两条 http 请求是没有关系的，但是通过在 headers 加入 cookie 可以共享相同的状态  
3、应用层协议：tcp 属于传输层协议，ip 属于网络层协议  
4、无连接：每次连接只处理一次请求，请求完成便断开连接  
5、简单：请求方式简单，只需要提供方法和 url  
6、客户端/服务器模式：由客户端发起请求，服务端响应

#### 状态码

2——成功：200、成功  
3——重定向：301、永久重定向；302、临时重定向；304、协商缓存  
4——客户端请求错误：404、找不对请求网页  
5——服务器错误：500、服务器内部错误

#### tcp 三次握手

1、客户端 -> 服务器 请求建立连接：SYN  
2、服务器 -> 客户端 同意你的连接请求并向你发起建立连接：SYN+ACK  
3、客户端 -> 服务器 同意你的连接：ACK

##### 为什么是三次、不是两次

会造成资源浪费，如果因为网络堵塞，客户端会重复多次发送 SYN，而服务器在收到请求后会建立多余的无效连接  
比如，假如是两次握手，当第一次客户端发出的请求因为网络堵塞停滞了，之后又到达了服务端，服务端会认为又客户端建立新的连接，则一直处于 listend 状态，浪费资源

#### tcp 四次挥手

1、客户端 -> 服务器 请求连接终止：FIN  
2、服务器 -> 客户端 同意你的终止请求：ACK  
3、服务器 -> 客户端 请求连接终止：FIN  
4、客户端 -> 服务器 同意你的连接：ACK

#### http 和 https 的区别

https 相当于在 http 和 tcp 中间加了一层 ssl/tls 协议

1、http 默认端口 80，https 默认端口 443  
2、http 是明文传输，https 是 ssl 加密后的传输，安全性更高

#### http1 和 http2 的区别

1、二进制传输：http1 是文本传输；http2 是二进制传输  
2、多路复用：同一域名下的客户端都可以在同一条 tcp 中完成连接请求完成  
3、头部压缩：压缩了 header 占用的空间  
4、服务器推送：http2 服务器可以主动推送请求给客户端

### 浏览器输入 url 后发生了什么

1、浏览器补全 url  
2、发请求时网络进程会首先查看本地是否有缓存  
3、如果没有缓存，会进行 dns 解析找到对应 ip  
4、找到 ip 后，和服务器进行 tcp 连接，三次握手  
5、浏览器发送 http 请求  
6、服务器接受请求，返回响应  
7、断开 tcp 连接，四次挥手  
8、浏览器渲染页面，解析 html 得到 dom，解析 css 得到 css 规则，合并成 render 树
