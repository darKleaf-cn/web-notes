### 强缓存和协商缓存

#### 区别

1、强缓存直接和本地对比，不去请求服务器，返回 200；协商缓存会去和服务器对比，若没有改变才直接读取本地缓存，返回 304

#### 强缓存

cache-control：public, max-age=3600, s-maxage=3600 意思是缓存多长时间失效，单位是秒，其中 s-maxage（只针对代理服务器）优先级大于 max-age  
默认是 private，仅可以被客户端缓存，public 还可以被代理服务器缓存  
no-cache 强制每次必须向服务器发送请求，判断缓存是否变更  
no-store 禁止一切缓存

expires：是 http1.0 过时的产物，代表缓存失效的时间戳，但是会被客户端系统时间影响

#### 协商缓存

强缓存失效后，客户端会向服务端发送请求判断缓存是否发生变化，如果没有则返回 304，继续使用缓存；如果有变化返回 200 和新资源

last-modified:代表上一次资源修改时间 etag：文件标识 etag 优先级大于 last-modified

#### 访问刷新分析

页面已经存在：

```
cache-control: max-age=72000
expires: Tue, 20 Nov 2018 20:41:14 GMT
last-modified: Tue, 20 Nov 2018 00:41:14 GMT
```

1、标签进入或者正常回车进入，正常执行先强缓存再协商缓存的基本流程  
2、f5 刷新：会使 max-age=0，缓存立即过期，直接执行协商缓存  
3、ctrl+f5 强制刷新：cache-control 变为 no-cache，其他字段失效
